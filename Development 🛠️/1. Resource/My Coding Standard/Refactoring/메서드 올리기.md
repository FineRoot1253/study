# 메서드 올리기

<aside>
⚠️ *"중복 코드 제거는 중요하다. 중복된 두 메서드가 당장은 문제 없이 동작할지라도 미래에는 벌레가 꼬이는 음식물 쓰레기로 전락할 수 있다. **무언가 중복되었다는 것은 한쪽의 변경이 다른 쪽에는 반영되지 않을 수 있다는 위험을 항상 수반**한다. ..."*

</aside>

```dart
class Employee{...}

class SalesMan extends Employee{
	get name => this.name;
}
class Engineer extends Employee{
	get name => this.name;
}
```

↓

```dart
class Employee{
	get name => this.name;
}

class SalesMan extends Employee{...}
class Engineer extends Employee{...}
```

필수 선행 단계

서로 다른 두개의 클래스를 각각 매개변수화하면 궁극적으로 같은 매서드가 되기도 한다.

1. 가장 적은 단계를 거쳐 리팩터링 하려면 각각의 [[함수를 매개변수화]]
2. 매서드를 상속 계층 위로 올리기

역으로 올리기를 적용하기 이상하고 복잡한 상황일 시

매서드의 본문에서 참조하는 필드들이 서브클래스에만 있는 경우

1. [[필드들을 먼저 슈퍼 클래스로 올림]]
2. 매서드를 상속계층 위로 올림

절차

1. 똑같이 **동작하는 매서드인지 자세히 조사**
    1. 실질적으로 **하는건 똑같은데 코드가 다르면 본문 코드를 똑같아질때까지 리팩터링**
2. 메서드 안에서 **호출하는 다른 메서드**와 **참조하는 필드들**을 **슈퍼클래스에서도 호출하고 참조** 할수 있는지 확인
3. 메서드 시그니처 미일치시 [[함수 선언 변경]] 시행 후 슈퍼클래스에서 **사용하고 싶은 형태로 통일**
4. 슈퍼클래스에 새로운 메서드를 생성하고, 대상 메서드의 코드를 복사해넣는다.
5. [정적 검사](https://m.blog.naver.com/PostView.nhn?blogId=bi1189&logNo=221521693365&proxyReferer=https:%2F%2Fwww.google.com%2F) 수행.
6. 서브클래스 중 하나의 메서드를 제거
7. 모든 서브클래스의 매서드가 없어질 때까지 다른 서브클래스의 메서드를 하나씩 제거

만약 동적 프로그래밍 언어인 자바스크립트에서 슈퍼클래스에 없는 질의 함수를 메서드 올리기로 올려둔 메서드에서 사용된다면 이는 사용이 가능하다. 동적 프로그래밍 언어의 특징이다.

이를 걸러 내고 싶다면 trap method를 하나 만들어 두면 좋다.

```jsx
get monthlyCost(){
	throw new SubclassResponsibilityError();
}
```

위의 모습 처럼 구현하자

이 오류는 서브클래스 책임 오류라고 하며 스몰토크에서 유래한 이름이다.
