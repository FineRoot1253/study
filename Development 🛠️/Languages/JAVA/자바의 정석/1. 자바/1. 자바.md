# 자바

# 자바란?

자바는 썬 마이크로시스템즈에서 개발하여 1996년 1월에 공식적으로 발표한 객체지향 프로그래밍 언어

OS에 독립적으로 동작하는 것이 가장 큰 특징이다.

이 특징은 다양한 기종의 컴퓨터와 운영체제가 공존하는 인터넷 환경에 적합한 언어로 발돋움하는데 큰 도움이 된다.

특히 인터넷의 발전과 함께 많은 사용자층을 확보할 수 있었다.

또한 객체지향개념과 기존의 다른 프로그래밍 언어인 c++의 장점을 채택함과 동시에 잘 사용되지 않는 부분은 과감히 제외시킴으로써 비교적 배우기 쉽고 이해하기 쉬운 간결한 표현이 가능하게 했다.

자바는 풍부한 클래스 라이브러리 (JAVA API)를 통해 프로그래밍에 필요한 요소들을 기본적으로 제공하기 때문에 자바 프로그래머는 단순히 이 클래스 라이브러리만을 잘 활용해도 강력한 기능의 자바 프로그램을 작성할 수 있다.

지금도 자바는 꾸준히 자바의 성능을 개선하여 새로운 버전을 발표하고 있다. 모바일(J2ME)이나 대규모 기업환경 (J2EE), XML 등의 다양한 최신 기술을 지원함으로써 그 활동영역을 넓혀 가고 있다.

## 자바의 역사

자바의 역사는 1991년 썬의 엔지니어들에 의해서 고안된 Oak(오크)라는 언어에서부터 시작되었다.

제임스 고슬링과 아서 밴 호프와 같은 썬의 엔지니어들의 원래 목표는 가전제품에 탑제될 소프트웨어를 개발하는 것이였고 C++을 확장하여 사용하려 했지만 그들의 목적을 이루기에 부족하다고 판단하여 C++의 장점은 챙기고 단점은 보완한 새 언어를 만들었다. 이 오크는 초기의 목적은 PDA같은 소형 가전제품에 사용하려 했으나 여러 종류의 운영체제를 사용하는 컴퓨터들이 통신하는 인터넷이 등장하자 운영체제에 독립적인 Oak가 적합하다고 판단후 다시 Oak를 인터넷에 적합하도록 개발 방향을 뒤틀고 새로이 이름을 자바로 지었다.

그리고 자바로 개발한 웹 브라우저인 핫 자바를 발표하고 다음 해에 자바의 정식 버전을 릴리즈 했다.

이때만 해도 자바로 개발한 애플릿,Applet은 정적인 웹페이지에 각종 사운드나 애니메이션등 멀티미디어적인 요소를 제공할 수 있는 유일한 방법이었기 때문에 많은 인기를 얻고 단 시간에 수많은 사용자 층을 확보하였으나

현재 애플릿은 보안상 대부분의 웹 브라우저에서 지원하지 않으며 서버쪽 프로그래밍을 위한 서블릿 Servlet, 이나 Jsp Java Server Pages가 더 많이 사용된다. 그리고 구글의 스마트폰 운영체제인 안드로이드에서도 Java를 사용한다.

앞으로 원래 목표였던 소규모 가전제품 + 대규모 기업환경을 위한 소프트웨어 개발 분야에 활발히 사용될 것으로 기대된다.

## 자바 언어의 특징

### 운영 체제에 독립적이다

일종의 에뮬레이터인 자바가상머신(JVM)을 통해서 가능하다.

자바 응용프로그램은 직접 커널이나 OS, 하드웨어등이 아닌 JVM하고만 통신을 하고 JVM은 자바 응용프로그램으로부터 전달받은 명령을 해당 운영체제가 이해할 수 있도록 변환하여 전달한다.

자바로 작성된 프로그램은 운영체제에 독립적이지만 JVM은 운영체제에 종속정이여서 썬에서는 여러 운영체제에 설치할 수 있는 서로 다른버전의 JVM을 제공하고 있다.

이러한 자바로 작성된 프로그램은 운영체제나 하드웨어에 상관없이 실행 가능하다는 특성을 한번 작성하면 어디서나 실행된다(**Write once, run everywhere**) 라고 표현한다.

<aside>
💡 다만 JVM 자체에 종속적이여서 범용 프로그램에 특화된 언어라고 볼 수 있다.
만약 전용 프로그램을 만든다면 C/C++을 사용해야한다.

</aside>

### 객체지향언어이다

자바는 프로그래밍의 대세로 자리잡은 객체지향 프로그래밍언어이며 객체지향개념의 특징인 상속, 캡슐화, 다형성이 잘 적용된 순수한 객체지향언어로 평가 받고 있다.

<aside>
💡 요즘 객체지향론자들의 의견에는 상속은 오히려 프로그램의 건강을 해친다는 주장이 많다.
실제로 극단적인 예약어 다이어트를 한 언어인 고랭의 경우엔  C-Like 언어이지만 사실 알고보면 객체지향성을 띄고 있는데 상속 특성을 버린 객체지향을 추구하고 있다.

</aside>

### 비교적 배우기 쉽다

자바의 연산자와 기본 구문은 C++에서, 객체 지향관련 구문은 스몰톡(small-talk)이라는 객체지향언어에서 가져왔다. 이 들 언어의 장점은 취하고 복잡하고 불필요한 부분은 과감히 제거하여 단순화 함으로써 쉽게 배울 수 있으며 간결하고 이해하기 쉬운 코드를 작성할 수 있도록 하였다.

객체지향언어의 특징인 재사용성과 유지보수의 용이성등의 많은 장점에도 불구하고 객체지향론 자체의 난해함때문에 많은 사용자층을 확보하지 못했으나 자바의 간결하면서도 명료한 객체지향적 설계는 사용자들의 객체 지향 개념을 보다 쉽게 이해하고 활용할 수 있도록 하여 객체지향 프로그래밍의 저변확대에 큰 기여를 했다.

<aside>
💡 객체지향론은 실세계를 얼마나 코드에 잘 반영할 수 있는가?를 목표로 둔 언어이다.
개인적으로 이 목표를 잘 부합하도록 만든 언어는 제록스에서 만든 스몰톡이라고 생각한다.
근데 써보면 많이 불편하다…
*~~‘제록스는 컴퓨터 산업 전체를 지배할 수 도 있었다.’ -스티브잡스-~~*

</aside>

### 자동 메모리 관리 (Garbage Collection)

자바로 작성된 프로그램이 실행되면, 가비지 컬렉터 (Garbage Collector)가 자동적으로 메모리를 관리한다.

이 가비지 컬렉터가 없다면 프로그래머는 메모리를 체크하고 반환하는 일을 수동적으로 처리해야 할 것이다.

자동으로 메모리를 관리하는 것이 다소 비효율적인 면도 있지만 프로그래머가 보다 프로그래밍에 집중 할 수 있도록 해준다.

<aside>
💡 실 운영에서는 GC 알고리즘을 잘 선택해야 하는 것도 중요하다.
자바의 GC는 약한 세대 가설을 이용해 각 힙에 할당된 각 인스턴스를 세대별로 관리한다.
이 세대를 교체하는 과정중 젊은 세대에서 일어나는 minor GC와 오래된 세대에서 Full GC 과정이 있는데 이 Full GC 과정의 문제는 모든 스레드의 동작을 일시중단시킨다.
이를 Stop the world, STW라고 부르는 현상이며 이 문제는 GC를 사용하는 언어의 고질적인 운영중 발생하는 성능 저하 이슈이다.
[[httpsfineroot1253.notion.siteJVM-0a0efdbc96944559a7ede63095e2bfb0]]

</aside>

### 네트워크와 분산처리를 지원한다

인터넷과 대규모 분산환경을 염두에 두고 만든 언어라 다양한 네트워크 프로그래밍 라이브러리 (Java API)를 통해 비교적 짧은 시간에 네트워크 관련 프로그램을 쉽게 개발할 수 있도록 지원한다.

### 멀티스레드를 지원한다

일반적으로 멀티스레드는 사용되는 운영체제에 따라 구현 방법도 상이하며, 처리방식도 다르다.

자바에서 개발되는 멀티스레드 프로그램은 시스템과는 관계없이 구현가능하며, 관련된 라이브러리(Java API)가 제공되므로 구현이 쉽다. 그리고 여러 스레드에 대한 스케쥴링(scheduling)을 자바 인터프리터가 담당하게 된다.

### 동적 로딩(Dynamic Loading)을 지원한다

보통 자바로 작성된 애플리케이션은 여러 개의 클래스로 구성되어 있다. 자바는 동적 로딩을 지원하기 때문에 실행 시에 모든 클래스가 로딩되지 않고 필요한 시점에 클래스를 로딩하여 사용할 수 있다는 장점이 있다. 그 외에도 일부 클래스가 변경되어도 전체 애플리케이션을 다시 컴파일하지 않아도 되며, 애플리케이션의 변경사항이 발생해도 비교적 적은 작업만으로도 처리 할 수 있는 유연한 애플리케이션을 작성 할 수 있다.

## JVM (Java Virtual Machine)

JVM은 Java Virtual Machine을 줄인 것으로 직역하면 자바를 실행하기 위한 가상 기계라고 할 수 있다.

가상 기계는 소프트웨어로 구성된 하드웨어를 뜻하는 넓은 의미의 용어이며 컴퓨터 성능이 향상됨에 따라 점점 더 많은 하드웨어들이 소프트웨어화되어 컴퓨터속으로 들어오는 추세이다.

 → TV, Video를 소프트웨어화: 윈도우 미디어 플레이어, 오디오 시스템을 소프트웨어화: Winamp

가상 컴퓨터는 실제 컴퓨터(하드웨어)가 아닌 소프트웨어로 구현된 컴퓨터라는 뜻으로 컴퓨터 속의 컴퓨터라고 생각하면 된다.

자바로 작성된 애플리케이션은 모두 이 가상 컴퓨터(JVM)에서만 실행되기 때문에 자바 애플리케이션이 실행되기 위해서는 반드시 JVM이 필요하다.

→ 일반 애플리케이션 환경: 애플리케이션 - OS - 컴퓨터 (하드웨어)

→ Java 애플리케이션 환경: Java 애플리케이션 - JVM - OS - 컴퓨터(하드웨어)

일반 애플리케이션과 달리 JVM을 한 번 더 거치며 온전히 컴파일 되지 않고 하드웨어에 맞게 실행 시에 해석(interpret 인터프리트)되기 때문에 속도가 느린 단점이 있다.

허나 요즘엔 바이트코드(컴파일된 자바코드)를 하드웨어의 기계어로 바로 변환해주는 JIT 컴파일러와 향상된 최적화 기술이 적용되어 속도의 격차가 많이 보완되었다.

사실 위의 티어 레벨은 각각 레벨이 어느 레벨에 종속적인지 볼 수 있다.
특히 주의할 점은 일반 애플리케이션은 OS에 종속적인데 반해 Java 애플리케이션은 JVM에 종속적이며 JVM은 OS에 종속적이라는 점이다.

그래서 썬에서는 주요 OS용 JVM을 제공하고 있고 **Write once, run everywhere**가 ****가능하다.

# 자바 개발환경

## JDK

자바로 프로그래밍을 진행하기 위해선 Java Development Kit을 설치해야한다.

JDK 설치시 JVM과 자바 클래스 라이브러리(java API)외에 자바를 개발하는데 필요한 프로그램들이 설치된다.

- 호칭

    JDK1.5부터 JDK5.0으로 부르기 시작했다. JDK1.19까지 나온 상태이다.

- 설치 방법
    1. JDK 설치
    2. 자바 환경 변수 설정 (bin 디렉토리 설정)
- 주요 실행 파일
    - javac.exe

        자바 컴파일러, 자바 소스코드를 바이트 코드로 컴파일

    - java.exe

        자바 인터프리터, 컴파일러가 생성한 바이트코드를 해석(interpret)하고 실행

    - javap.exe

        역어셈블러(디어셈블러), 컴파일된 클래스 파일을 원래의 소스로 변환한다.

    - javadoc.exe

        자동 문서 생성기, 소스파일에 있는 “/** … */” 주석을 이용하여 Java API 문서와 같은 형식의 문서를 자동으로 생성한다.

    - jar.exe

        압축프로그램, 클래스파일과 프로그램의 실행에 관련된 파일을 하나의 jar파일(.jar)로 압축하거나 압축해제한다.

- JDK와 JRE
    - JDK

        자바개발도구 (Java Development Kit)

        - 구성

            JRE + 개발에 필요할 실행파일 (javac.exe등등)

    - JRE

        자바 실행 환경 (Java Runtime Environment)

        자바로 작성된 응용프로그램이 실행되기 위한 최소환경

        - 구성

            JVM + 클래스 라이브러리 (Java API)


# 테스트 컴파일 해보기

## Hello.java

```java
package ch1;

public class Hello {
    public static void main(String[] args){
        System.out.println("Hello, world!");
    }
}
```

- 실행 결과

    [[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-09-30_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.41.15.png]]


### 자바 프로그램 작성 규칙

- 모든 코드는 반드시 클래스 안에 존재해야한다.

    서로 관련된 코드들을 그룹으로 나누어 별도의 클래스를 구성하게 된다.

    그리고 이 클래스들이 모여 하나의 java 애플리케이션을 이룬다.

    - 클래스 작성 규칙

        ```java
        class 클래스명 {
        	// 각종 코드...
        }
        ```

        이 클래스 { … } 블럭안에 원하는 코드를 넣으면 된다.

        - 하나의 소스파일에 2개의 클래스를 넣을 수 있다.

            다만 public class의 클래스 명과 소스파일 명은 같아야한다.

            만약 public class가 없다면 이름 매칭 필요는 없다.

            - 올바른 예시 1

                ```java
                // Hello.java
                package ch1;

                public class Hello {
                }
                class Hello2{
                }
                ```

            - 올바른 예시

                ```java
                // Hello.java
                package ch1;

                class Hello1{
                }
                class Hello2{
                }
                ```

            - 잘못된 예시 1 [public 클래스 유일성 파괴]

                ```java
                // Hello.java
                package ch1;

                public class Hello{
                }
                public class Hello2{
                }
                ```

            - 잘못된 예시 2 [public 클래스 매칭 실패]

                ```java
                // Hello.java
                package ch1;

                public class Hello2{
                }
                class Hello{
                }
                ```

            - 잘못된 예시 3 [대소문자 매칭 실패]

                ```java
                // hello.java
                package ch1;

                public class Hello{
                }
                class Hello3{
                }
                ```

- `public static void main(String[] args)`

    main메서드의 선언부이다. 프로그램 실행시 java.exe(인터프리터)에 의해 호출될 수 있도록 미리 약속된 부분이다.

    이것을 종종 엔트리포인트라고 부른다.

- Java 프로그램은 main 메서드의 첫 문장부터과 마지막 문장까지 실행하고 종료된다.

    모든 클래스가 main 메서드를 가지고 있어야 하는 것은 아니지만, 하나의 java 애플리케이션에는 main 메서드를 포함한 클래스가 반드시 하나는 있어야 한다.

    main 메서드는 java 애플리케이션의 시작점이므로 main 메서드없이는 java 애플리케이션은 실행될 수 없기 때문이다.

    - 작성된 자바프로그램 실행 필수 요소
        - java.exe
        - main 메서드를 포함한 클래스의 이름
- 컴파일시 자바파일 기반이 아닌 클래스를 기반으로 클래스 파일이 생성된다.

    한 자바파일에 클래스를 2개 이상을 작성했다면 하나의 자바파일에서 2개의 이상의 클래스가 나온다.


## 자주 발생하는 에러와 해결방법

<aside>
💡 그냥 좋은 IDE를 사용하면 정적 분석기가 전부 찾아서 지적해준다.
이에 더불어 소나린트를 사용하면 문제가 될만한 코드 요소까지 집어서 경고해준다.

</aside>

## 자바 프로그램 실행 과정

1. 프로그램의 실행에 필요한 클래스(*.class 파일)를 로드한다.
2. 클래스파일을 검사한다. (파일 형식, 악성코드 체크)
3. 지정된 클래스 (Hello)에서 main (String[] args)를 호출한다.

## 주석

주석의 종류는 3가지이다.

1. //

    한줄 주석

2. /* … */

    범위 주석

3. /** … */

    범위 주석, Java API 문서와 같은 형식의 문서를 자동으로 만들 수 있는 주석
